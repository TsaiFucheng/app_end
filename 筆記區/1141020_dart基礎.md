# Dart 基礎 - main、資料型別、變數宣告

> 課程日期：114/10/20
> 對應檔案：`1141020.txt`

---

## 教學重點

### 1. Dart/Flutter 進入點 (main)

#### 基本 main 函式
```dart
void main() {
  print("Hello, world!");
}
```

#### 帶參數的 main 函式
```dart
void main(List<String> args) {
  print(args);
}
```

**執行方式：**
```bash
D:\>dart main.dart hello
[hello]

D:\>dart main.dart hello,world
[hello,world]

D:\>dart main.dart "Hi, good afternoon"
[Hi, good afternoon]
```

#### 命令列參數處理
```dart
main(List<String> args) {
  var a = int.parse(args[0]);  // 字串轉整數
  var b = int.parse(args[1]);
  print("$a + $b = ${a+b}");   // String interpolation
}
```

### 2. 註解 (Comment)

```dart
// 單行註解

/*
  多行註解
  可跨越多行
*/

/// 文件註解 (用於 API 文件生成)
```

### 3. 變數宣告 (Variable Declaration)

**命名規則：**
1. 第一個字不可為數字
2. 大小寫區分 (`a` 不等於 `A`)
3. 除了 `_` 及 `$`，不可包含特殊符號
4. 不可使用保留字 (關鍵字)
5. 推薦使用 `lowerCamelCase` 風格

```dart
int a = 1;
int A = 1;    // A 不等於 a
int j;        // 初值 = null (需 null safety)
var x = 1;    // 系統自動推論型別
```

---

## 資料型別 (Data Types)

### 1. int (64-bit 整數)

```dart
int x = 1;              // 明確宣告
var x = 1;              // 自動推論
int y;                  // y = null
var h = 0xFFFF;         // 16進制
var i = -123456789;     // 10進制
```

#### 進位轉換 (使用 b package)
```dart
import 'package:b/b.dart';

void main() {
  BaseConversion decToBin = BaseConversion(from: base10, to: base2);
  String d1 = decToBin('127');
  print(d1);  // 1111111

  BaseConversion hexToBin = BaseConversion(from: base16, to: base2);
  String d2 = hexToBin('0C');
  print(d2.padLeft(8, '0'));  // 00001100
}
```

### 2. double (IEEE 754 64-bit 浮點數)

```dart
double j = 2.0;
var y = 1.1;
const e = 2.317;
var exp1 = 1.42e5;      // 科學記號
double z = 1;           // 等同 double z = 1.0

// 特殊值
print(double.maxFinite);       // 1.7976931348623157e+308
print(double.infinity);        // Infinity
print(double.negativeInfinity); // -Infinity
print(double.minPositive);     // 5e-324
print(double.nan);             // NaN
print(double.nan.isNaN);       // true
```

#### 亂數產生
```dart
import 'dart:math';

main() {
  int r1 = Random().nextInt(1000);        // 0 <= r1 < 1000
  int r2 = 10 + Random().nextInt(10);     // 10 <= r2 < 20
  double r3 = Random().nextDouble();      // 0.0 <= r3 < 1.0
  String r4 = r3.toStringAsFixed(4);      // 取小數點後4位
}
```

### 3. 數值轉換與運算

```dart
main() {
  // 型別轉換
  int a = (10.25).toInt();       // double 轉 int
  double b = (10).toDouble();    // int 轉 double

  // 數學運算
  num c = (-2).abs();            // 絕對值: 2
  num d1 = (10.45).round();      // 四捨五入: 10
  num d2 = (10.55).round();      // 四捨五入: 11
  num e = num.parse("123.45");   // 字串轉數值
  num f = (-2.3).floor();        // 無條件捨去: -3
  num g = (-2.3).ceil();         // 無條件進位: -2

  // 格式化輸出
  print(b.toStringAsFixed(2));   // 10.00
}
```

### 4. bool (布林值)

```dart
bool isTrue = true;
bool isFalse = false;
```

### 5. String (字串)

#### 字串定義
```dart
var string1 = 'Hello';           // 單引號
var string2 = "World";           // 雙引號
var string3 = '''
  多行
  字串
''';                             // 三引號多行

// 引號內含引號
var s1 = "It's my book";         // 字串含單引號，用雙引號包
var s2 = '"Hello", She said';    // 字串含雙引號，用單引號包
```

#### String Interpolation (字串插值)
```dart
var city = "Taipei";
print("I live in ${city}");      // I live in Taipei
print("1 + 2 = ${1 + 2}");       // 1 + 2 = 3
```

#### 字串串接
```dart
var s1 = "Hello" + ", world!";   // 使用 +
var s2 = "Hello" ", world!";     // 相鄰字串自動串接
```

#### 跳脫字元 (Escape Characters)
```dart
print("This is \n new line");    // 換行
print("Hello \t world!");        // Tab
print(r"Hello \t world!");       // Raw string (不解析跳脫)
print("\u0024");                 // UTF-16 字元: $
```

#### UTF-16 編碼
```dart
String s1 = "Dart";
print(s1.codeUnits);      // [68, 97, 114, 116]
print(s1.codeUnitAt(0));  // 68
```

---

## 常用方法整理

### 數值方法
| 方法 | 說明 | 範例 |
|------|------|------|
| `toInt()` | 轉換為整數 | `(10.5).toInt()` → 10 |
| `toDouble()` | 轉換為浮點數 | `(10).toDouble()` → 10.0 |
| `abs()` | 絕對值 | `(-5).abs()` → 5 |
| `round()` | 四捨五入 | `(10.5).round()` → 11 |
| `floor()` | 無條件捨去 | `(10.9).floor()` → 10 |
| `ceil()` | 無條件進位 | `(10.1).ceil()` → 11 |
| `toStringAsFixed(n)` | 格式化小數位 | `(3.14159).toStringAsFixed(2)` → "3.14" |

### 字串方法
| 方法 | 說明 | 範例 |
|------|------|------|
| `padLeft(n, char)` | 左側填充 | `"12".padLeft(4, '0')` → "0012" |
| `codeUnits` | 取得 UTF-16 編碼列表 | `"AB".codeUnits` → [65, 66] |
| `codeUnitAt(i)` | 取得指定位置編碼 | `"AB".codeUnitAt(0)` → 65 |

---

## 學習要點總結

- [ ] 了解 `main()` 函式的兩種形式
- [ ] 掌握命令列參數 `List<String> args` 的使用
- [ ] 熟悉變數命名規則
- [ ] 區分 `int` 和 `double` 資料型別
- [ ] 使用 `Random()` 產生亂數
- [ ] 掌握數值轉換方法 (`toInt()`, `toDouble()`, `parse()`)
- [ ] 使用 String Interpolation `${}` 插入變數
- [ ] 了解跳脫字元和 Raw String (`r""`)
- [ ] 使用 `toStringAsFixed()` 格式化數字輸出
