# Dart é›†åˆé€²éšèˆ‡è³‡æ–™è½‰æ›

> èª²ç¨‹æ—¥æœŸï¼š114/11/10
> å°æ‡‰æª”æ¡ˆï¼š`1141110.txt`

---

## æ•™å­¸é‡é»

### 1. Queue ä½‡åˆ—

```dart
import 'dart:collection';

void main() {
  Queue q = Queue();
  q.addAll([10, 20, 30]);

  // ä½¿ç”¨ Iterator éæ­·
  Iterator i = q.iterator;
  while (i.moveNext()) {
    print(i.current);
  }

  // ä½¿ç”¨ for-in éæ­·
  for (var item in q) {
    print(item);
  }
}
```

### 2. Runes (Unicode å­—å…ƒ)

```dart
void main() {
  // ä½¿ç”¨ \uXXXX æˆ– \u{XXXX} è¡¨ç¤º Unicode
  Runes heart = Runes('\u2665');
  Runes laugh = Runes('\u{1f600}');
  print(String.fromCharCodes(heart));  // â™¥
  print(String.fromCharCodes(laugh));  // ğŸ˜€

  // ç›´æ¥åœ¨å­—ä¸²ä¸­ä½¿ç”¨
  String heart1 = '\u2665';
  String greeting = '\u4f60\u597d';  // ä½ å¥½
  print(greeting);

  // å–å¾—å­—å…ƒçš„ Unicode ç·¨ç¢¼
  String x = 'Runes';
  print(x.codeUnitAt(0));    // 82
  print(x.codeUnits);        // [82, 117, 110, 101, 115]

  // é€å­—å…ƒè™•ç†
  'iijii'.runes.forEach((code) {
    print(String.fromCharCode(code));
  });
}
```

---

## é‹ç®—å­ (Operators)

### é‚è¼¯é‹ç®—å­

```dart
var x = (true || false);   // OR: true
var y = (true && false);   // AND: false
var z = !(15 > 10);        // NOT: false
```

### ä½å…ƒé‹ç®—å­

| é‹ç®—å­ | èªªæ˜ | ç¯„ä¾‹ |
|--------|------|------|
| `&` | AND | `a & b` |
| `\|` | OR | `a \| b` |
| `^` | XOR | `a ^ b` |
| `~` | NOT | `~a` |
| `<<` | å·¦ç§» | `a << b` |
| `>>` | å³ç§» | `a >> b` |

```dart
final v = 0x22;       // 34
final bitmask = 0x0f; // 15
print(v & bitmask);   // 2
print(v | bitmask);   // 47
print(v ^ bitmask);   // 45
print(3 << 1);        // 6 (3*2)
print(3 >> 1);        // 1 (3/2)
```

### ç®—è¡“é‹ç®—å­

| é‹ç®—å­ | èªªæ˜ | ç¯„ä¾‹ |
|--------|------|------|
| `+`, `-` | åŠ æ¸› | `a + b` |
| `*`, `/` | ä¹˜é™¤ | `a * b` |
| `~/` | æ•´æ•¸é™¤æ³• | `5 ~/ 3` â†’ 1 |
| `%` | å–é¤˜æ•¸ | `5 % 3` â†’ 2 |
| `++`, `--` | éå¢éæ¸› | `a++`, `++a` |

```dart
// å–é¤˜æ•¸è¦å‰‡
print(5 % 3);    // 2
print(-5 % 3);   // 1 (é¤˜æ•¸å–æ­£)
print(5 % -3);   // 2
print(-5 % -3);  // 1
```

### Null ç›¸é—œé‹ç®—å­

```dart
// ??= (null æ™‚è³¦å€¼)
var a = 123;
var b;
print(a ??= 456);  // 123 (a ä¸æ˜¯ nullï¼Œä¸è³¦å€¼)
print(b ??= 789);  // 789 (b æ˜¯ nullï¼Œè³¦å€¼)

// ?? (null åˆä½µ)
print(a ?? 456);   // 123
print(null ?? 2);  // 2

// ?. (null å®‰å…¨å­˜å–)
String? value;
print(value?.toLowerCase());  // null (ä¸æœƒå ±éŒ¯)
```

### å±•é–‹é‹ç®—å­ (Spread Operator)

```dart
var list1 = [1, 2, 3];
var list2 = [0, ...list1];      // [0, 1, 2, 3]

// ...? (null å®‰å…¨å±•é–‹)
List<int>? nullableList;
var list3 = [0, ...?nullableList];  // [0]
```

### å‹åˆ¥æª¢æŸ¥

```dart
Object s1 = 'Hello';

// is æª¢æŸ¥å‹åˆ¥
if (s1 is String) {
  print('s1 is String');
}

// is! æª¢æŸ¥éè©²å‹åˆ¥
if (s1 is! int) {
  print('s1 is not int');
}

// as å¼·åˆ¶è½‰å‹
String myString = s1 as String;
```

### ä¸²æ¥é‹ç®—å­ (Cascade Operator)

```dart
class Student {
  var id;
  var name;
  void greet() => print('Hello');
}

// å‚³çµ±å¯«æ³•
var s1 = Student();
s1.id = 1;
s1.name = 'Andy';

// ä¸²æ¥å¯«æ³•
var s2 = Student()
  ..id = 1
  ..name = 'Andy'
  ..greet();
```

---

## æµç¨‹æ§åˆ¶ (Control Flow)

### æ¢ä»¶åˆ¤æ–·

```dart
// if-else
int score = 80;
if (score < 60) {
  print('So bad...');
} else if (score >= 60 && score < 80) {
  print('Not bad~');
} else {
  print('Good job!');
}

// switch
var command = 'OPEN';
switch (command) {
  case 'CLOSED':
    print('Closed!');
    break;
  case 'OPEN':
    print('Open!');
    break;
  default:
    print('Unknown');
}
```

### è¿´åœˆ

```dart
// for è¿´åœˆ
for (int i = 0; i < 5; i++) {
  print(i);
}

// for-in è¿´åœˆ
List n = [1, 2, 3, 4, 5];
for (var item in n) {
  print(item);
}

// forEach
n.forEach((i) => print(i));

// while
int k = 0, sum = 0;
while (k <= 10) {
  sum += k;
  k++;
}

// do-while
int x = 6;
do {
  print('x = $x');
} while (x < 5);  // è‡³å°‘åŸ·è¡Œä¸€æ¬¡

// break å’Œ continue
for (int i = 0; i < 10; i++) {
  if (i == 2) continue;  // è·³é
  if (i == 5) break;     // ä¸­æ–·
  print(i);
}
```

### æ¨™æº–è¼¸å…¥è¼¸å‡º

```dart
import 'dart:io';

void main() {
  stdout.write('è«‹è¼¸å…¥å§“å: ');
  String? name = stdin.readLineSync();
  print('Hello, $name');

  stdout.write('è«‹è¼¸å…¥æ•¸å­—: ');
  int num = int.parse(stdin.readLineSync()!);
}
```

---

## ä¾‹å¤–è™•ç† (Exception Handling)

### try-catch-finally

```dart
void main() {
  try {
    var list = [1, 2, 3];
    print(list[5]);  // è¶…å‡ºç¯„åœ
  } catch (e) {
    print('Error: $e');
  } finally {
    print('ç¨‹å¼çµæŸ');  // ç„¡è«–å¦‚ä½•éƒ½æœƒåŸ·è¡Œ
  }
}
```

### æ‹‹å‡ºä¾‹å¤–

```dart
void test(int age) {
  if (age < 0) {
    throw FormatException();
  }
}

void main() {
  try {
    test(-20);
  } catch (e) {
    print('å¹´é½¡ä¸èƒ½ç‚ºè² æ•¸!');
  }
}
```

### è‡ªè¨‚ä¾‹å¤–

```dart
class AmountException implements Exception {
  String message;
  AmountException(this.message);
}

void withdraw(int amount) {
  if (amount < 0) {
    throw AmountException('é‡‘é¡å¿…é ˆå¤§æ–¼é›¶!');
  }
}

void main() {
  try {
    withdraw(-200);
  } on AmountException catch (e) {
    print(e.message);
  }
}
```

---

## å‡½å¼ (Functions)

### å‡½å¼å®£å‘Š

```dart
// å®Œæ•´å¯«æ³•
int add1(int a, int b) {
  return a + b;
}

// çœç•¥å‹åˆ¥
add2(a, b) {
  return a + b;
}

// ç®­é ­å‡½å¼
int add3(int a, int b) => a + b;

// ç„¡å›å‚³å€¼
void printMsg() => print('Hello!');
```

### å¯é¸åƒæ•¸

```dart
// ä½ç½®å¯é¸åƒæ•¸ (ç”¨ [])
int p1([int a = 0]) => a;

// ä½¿ç”¨
print(p1(3));   // 3
print(p1());    // 0 (ä½¿ç”¨é è¨­å€¼)

// å…·åå¯é¸åƒæ•¸ (ç”¨ {})
void greet({String name = 'Guest', int age = 0}) {
  print('Hello $name, age $age');
}

greet(name: 'John', age: 25);
greet();  // Hello Guest, age 0
```

---

## å¸¸ç”¨é‹ç®—å­é€ŸæŸ¥è¡¨

| é‹ç®—å­ | èªªæ˜ | ç¯„ä¾‹ |
|--------|------|------|
| `??` | null åˆä½µ | `a ?? b` |
| `??=` | null æ™‚è³¦å€¼ | `a ??= b` |
| `?.` | null å®‰å…¨å‘¼å« | `a?.method()` |
| `...` | å±•é–‹ | `[...list]` |
| `...?` | null å®‰å…¨å±•é–‹ | `[...?list]` |
| `..` | ä¸²æ¥ | `obj..a=1..b=2` |
| `is` | å‹åˆ¥æª¢æŸ¥ | `a is String` |
| `as` | å‹åˆ¥è½‰æ› | `a as String` |
| `~/` | æ•´æ•¸é™¤æ³• | `5 ~/ 2` |

---

## å­¸ç¿’è¦é»ç¸½çµ

- [ ] äº†è§£ Queue çš„ä½¿ç”¨æ–¹å¼
- [ ] ä½¿ç”¨ Runes è™•ç† Unicode å­—å…ƒ
- [ ] æŒæ¡å„ç¨®é‹ç®—å­çš„ç”¨æ³•
- [ ] ä½¿ç”¨ `??` å’Œ `?.` è™•ç† null
- [ ] ä½¿ç”¨å±•é–‹é‹ç®—å­ `...` å’Œ `...?`
- [ ] ä½¿ç”¨ä¸²æ¥é‹ç®—å­ `..` ç°¡åŒ–ç¨‹å¼ç¢¼
- [ ] æŒæ¡ if-elseã€switchã€forã€while æµç¨‹æ§åˆ¶
- [ ] ä½¿ç”¨ try-catch-finally è™•ç†ä¾‹å¤–
- [ ] äº†è§£è‡ªè¨‚ä¾‹å¤–çš„å¯¦ä½œæ–¹å¼
- [ ] æŒæ¡ç®­é ­å‡½å¼å’Œå¯é¸åƒæ•¸çš„ä½¿ç”¨
